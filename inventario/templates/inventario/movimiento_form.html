{% extends 'base.html' %}

{% block title %}{{ title }} - AdminiRed{% endblock %}

{% block content %}
<div class="section">
    <div style="margin-bottom: 1.5rem;">
        <h2><i class="fas fa-exchange-alt"></i> {{ title }}</h2>
        <a href="{% url 'inventario:movimiento_list' %}" style="color: #667eea; text-decoration: none; font-size: 0.9rem;">
            <i class="fas fa-arrow-left"></i> Volver a Movimientos
        </a>
    </div>
    
    {% if messages %}
        {% for message in messages %}
            <div class="alert {% if message.tags == 'error' %}alert-danger{% elif message.tags == 'success' %}alert-success{% else %}alert-info{% endif %}" style="margin-bottom: 1rem;">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    
    <form method="post" style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        {% csrf_token %}
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
            <div class="form-group">
                <label for="{{ form.material.id_for_label }}">Material *</label>
                {{ form.material }}
                {% if form.material.errors %}
                    <div style="color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem;">{{ form.material.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.tipo.id_for_label }}">Tipo de Movimiento *</label>
                {{ form.tipo }}
                {% if form.tipo.errors %}
                    <div style="color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem;">{{ form.tipo.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="{{ form.cantidad.id_for_label }}">Cantidad *</label>
                {{ form.cantidad }}
                {% if form.cantidad.errors %}
                    <div style="color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem;">{{ form.cantidad.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group" style="grid-column: 1 / -1;">
                <label for="{{ form.motivo.id_for_label }}">Motivo *</label>
                {{ form.motivo }}
                {% if form.motivo.errors %}
                    <div style="color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem;">{{ form.motivo.errors }}</div>
                {% endif %}
            </div>
            
            <div class="form-group" style="grid-column: 1 / -1;">
                <label for="{{ form.notas.id_for_label }}">Notas</label>
                {{ form.notas }}
                {% if form.notas.errors %}
                    <div style="color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem;">{{ form.notas.errors }}</div>
                {% endif %}
            </div>
        </div>
        
        <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: flex-end;">
            <button type="submit" class="btn">
                <i class="fas fa-save"></i> Guardar
            </button>
            <a href="{% url 'inventario:movimiento_list' %}" class="btn btn-secondary">
                <i class="fas fa-times"></i> Cancelar
            </a>
        </div>
    </form>
</div>

<script>
// Pre-seleccionar material si viene en la URL
const urlParams = new URLSearchParams(window.location.search);
const materialId = urlParams.get('material');
if (materialId) {
    document.getElementById('id_material').value = materialId;
}
</script>
{% endblock %}



